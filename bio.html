<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>V≈© ƒê·ª©c Duy ¬∑ Profile</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>

<body>
    <div class="bg-wrap">
        <div class="bg-base"></div>
        <div class="bg-mesh"></div>
        <div class="bg-grid"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bg-orb bg-orb-1"></div>
        <div class="bg-orb bg-orb-2"></div>
        <div class="bg-orb bg-orb-3"></div>
    </div>

    <div class="container">
        <main class="card">
            <header class="profile-header">
                <div class="avatar-wrap">
                    <img class="avatar" src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde" alt="V≈© ƒê·ª©c Duy">
                </div>
                <h1 id="profile-name">V≈© ƒê·ª©c Duy</h1>
                 <p class="names" id="names-tagline"> 04 ¬∑ 02 ¬∑ 2003</p>
                <p class="tagline" id="profile-tagline">Disciplined in thought, distinctive in action</p>
            </header>

            <section class="section-block" data-reveal data-section="intro">
                <h2 class="section-title">Gi·ªõi thi·ªáu</h2>
                <p class="intro-text" id="profile-intro">
                    Xin ch√†o, t√¥i l√† Duy. T√¥i ƒëam m√™ h·ªçc h·ªèi v√† ph√°t tri·ªÉn b·∫£n th√¢n m·ªói ng√†y.
                    Lu√¥n n·ªó l·ª±c ƒë·ªÉ suy nghƒ© c√≥ k·ª∑ lu·∫≠t v√† h√†nh ƒë·ªông kh√°c bi·ªát trong c√¥ng vi·ªác c≈©ng nh∆∞ cu·ªôc s·ªëng.
                </p>
            </section>

            <section class="section-block" data-reveal data-section="edu">
                <h2 class="section-title">Tr√¨nh ƒë·ªô h·ªçc v·∫•n</h2>
                <ul class="edu-list" id="edu-list">
                    <li class="edu-item">
                        <div class="edu-school">ƒê·∫°i h·ªçc M·ªè - ƒê·ªãa Ch·∫•t</div>
                        <div class="edu-meta">Chuy√™n ng√†nh c√¥ng ngh·ªá ph·∫ßn m·ªÅm ¬∑ 2021-2026</div>
                    </li>
                    <li class="edu-item">
                        <div class="edu-school">Trung h·ªçc ph·ªï th√¥ng C Nghƒ©a H∆∞ng</div>
                        <div class="edu-meta">2018-2021</div>
                    </li>
                </ul>
            </section>

            <section class="section-block" data-reveal data-section="contact">
                <h2 class="section-title">Th√¥ng tin c√° nh√¢n</h2>
                <div class="buttons" id="contact-buttons">
                    <a href="tel:0362302106" class="btn btn-primary" id="btn-phone">üìû ƒêi·ªán tho·∫°i</a>
                    <a href="mailto:jerryvux@gmail.com" class="btn btn-secondary" id="btn-email">‚úâÔ∏è Email</a>
                    <a href="https://www.google.com/maps/search/?api=1&query=X%C3%A3+Ngh%C4%A9a+L%C3%A2m,+Ninh+B%C3%ACnh" class="btn btn-secondary" target="_blank" rel="noopener noreferrer" id="btn-location">üìç V·ªã tr√≠</a>
                    <a href="https://www.facebook.com/vddTomshop" class="btn btn-secondary" target="_blank" rel="noopener noreferrer" id="btn-facebook">Facebook</a>
                    <a href="https://www.tiktok.com/@jdionvux?_r=1&_t=ZS-93u5QmsQxMn" class="btn btn-secondary" target="_blank" rel="noopener noreferrer" id="btn-tiktok">TikTok</a>
                </div>
            </section>
        </main>

        <p class="credit credit-text">
            Thi·∫øt k·∫ø b·ªüi <a href="#" target="_blank" rel="noopener noreferrer">V≈© ƒê·ª©c Duy</a>
        </p>
    </div>

    <!-- N√∫t Edit: ch·ªâ hi·ªán khi ch·ªß s·ªü h·ªØu m·ªü link ?edit=M·∫¨T_KH·∫®U -->
    <button type="button" class="edit-fab" id="edit-fab" title="Ch·ªânh s·ª≠a (ch·ªß s·ªü h·ªØu)" style="display: none;">‚úé</button>

    <!-- Panel ch·ªânh s·ª≠a -->
    <div class="edit-overlay" id="edit-overlay" aria-hidden="true">
        <div class="edit-panel">
            <div class="edit-panel-header">
                <h3>Ch·ªânh s·ª≠a profile (Ch·ªß s·ªü h·ªØu)</h3>
                <button type="button" class="edit-close" id="edit-close" aria-label="ƒê√≥ng">√ó</button>
            </div>
            <div class="edit-panel-body">
                <fieldset class="edit-group">
                    <legend>üîê M·∫≠t kh·∫©u ch·ªß (ƒë·ªÉ m·ªü ch·∫ø ƒë·ªô s·ª≠a)</legend>
                    <label>M·∫≠t kh·∫©u khi m·ªü link <code>?edit=1</code> <input type="password" id="input-owner-key" placeholder="ƒê·∫∑t m·∫≠t kh·∫©u v√† l∆∞u"></label>
                    <button type="button" class="btn-save-key" id="save-owner-key">L∆∞u m·∫≠t kh·∫©u</button>
                    <p class="edit-hint">Ch·ªâ b·∫°n bi·∫øt m·∫≠t kh·∫©u. G·ª≠i link <strong>kh√¥ng c√≥</strong> ?edit= cho ng∆∞·ªùi xem.</p>
                </fieldset>
                <fieldset class="edit-group">
                    <legend>·∫®n / Hi·ªán ph·∫ßn (ng∆∞·ªùi xem th·∫•y g√¨)</legend>
                    <label class="edit-toggle"><input type="checkbox" id="opt-intro" checked> Hi·ªÉn th·ªã Gi·ªõi thi·ªáu</label>
                    <label class="edit-toggle"><input type="checkbox" id="opt-edu" checked> Hi·ªÉn th·ªã Tr√¨nh ƒë·ªô h·ªçc v·∫•n</label>
                    <label class="edit-toggle"><input type="checkbox" id="opt-contact" checked> Hi·ªÉn th·ªã Th√¥ng tin c√° nh√¢n</label>
                </fieldset>
                <fieldset class="edit-group">
                    <legend>Th√¥ng tin c∆° b·∫£n</legend>
                    <label>T√™n <input type="text" id="input-name" placeholder="H·ªç t√™n"></label>
                    <label>Tagline <input type="text" id="input-tagline" placeholder="C√¢u m√¥ t·∫£ ng·∫Øn"></label>
                    <label>Gi·ªõi thi·ªáu <textarea id="input-intro" rows="3" placeholder="ƒêo·∫°n gi·ªõi thi·ªáu b·∫£n th√¢n"></textarea></label>
                </fieldset>
                <fieldset class="edit-group">
                    <legend>H·ªçc v·∫•n (m·ªói d√≤ng: T√™n tr∆∞·ªùng | Chuy√™n ng√†nh ¬∑ NƒÉm)</legend>
                    <textarea id="input-edu" rows="4" placeholder="ƒê·∫°i h·ªçc ABC | C√¥ng ngh·ªá ¬∑ 2020&#10;THPT XYZ | 2016"></textarea>
                </fieldset>
                <fieldset class="edit-group">
                    <legend>Li√™n h·ªá & m·∫°ng x√£ h·ªôi</legend>
                    <label>S·ªë ƒëi·ªán tho·∫°i <input type="tel" id="input-phone" placeholder="0362302106"></label>
                    <label>Email <input type="email" id="input-email" placeholder="email@example.com"></label>
                    <label>ƒê·ªãa ch·ªâ (cho n√∫t V·ªã tr√≠) <input type="text" id="input-address" placeholder="X√£ Nghƒ©a L√¢m, Ninh B√¨nh"></label>
                    <label>Link Facebook <input type="url" id="input-facebook" placeholder="https://facebook.com/..."></label>
                    <label>Link TikTok <input type="url" id="input-tiktok" placeholder="https://tiktok.com/@..."></label>
                </fieldset>
            </div>
            <div class="edit-panel-footer">
                <button type="button" class="btn-apply" id="edit-apply">√Åp d·ª•ng</button>
                <button type="button" class="btn-share" id="edit-copy-link">üìã Sao ch√©p link chia s·∫ª</button>
                <button type="button" class="btn-reset" id="edit-reset">ƒê·∫∑t l·∫°i m·∫∑c ƒë·ªãnh</button>
            </div>
        </div>
    </div>

    <script>
        (function() {
            const STORAGE_KEY = 'bioProfile';
            const OWNER_KEY_STORAGE = 'bioOwnerKey';
            const defaultData = {
                sections: { intro: true, edu: true, contact: true },
                name: 'V≈© ƒê·ª©c Duy',
                names:'04 ¬∑ 02 ¬∑ 2003',
                tagline: 'Disciplined in thought, distinctive in action',
                intro: 'Xin ch√†o, t√¥i l√† Duy. T√¥i ƒëam m√™ h·ªçc h·ªèi v√† ph√°t tri·ªÉn b·∫£n th√¢n m·ªói ng√†y.\nLu√¥n n·ªó l·ª±c ƒë·ªÉ suy nghƒ© c√≥ k·ª∑ lu·∫≠t v√† h√†nh ƒë·ªông kh√°c bi·ªát trong c√¥ng vi·ªác c≈©ng nh∆∞ cu·ªôc s·ªëng.',
                edu: 'ƒê·∫°i h·ªçc M·ªè - ƒê·ªãa Ch·∫•t | Chuy√™n ng√†nh C√¥ng ngh·ªá ph·∫ßn m·ªÅm ¬∑ 2021 - 2026\nTrung h·ªçc ph·ªï th√¥ng C Nghƒ©a H∆∞ng | 2018 - 2021',
                phone: '0362302106',
                email: 'jerryvux@gmail.com',
                address: 'X√£ Nghƒ©a L√¢m, Ninh B√¨nh',
                facebook: 'https://facebook.com/yourprofile',
                tiktok: 'https://tiktok.com/@yourprofile'
            };

            function loadData() {
                try {
                    const raw = localStorage.getItem(STORAGE_KEY);
                    if (raw) return { ...defaultData, ...JSON.parse(raw) };
                } catch (_) {}
                return { ...defaultData };
            }

            function saveData(data) {
                try { localStorage.setItem(STORAGE_KEY, JSON.stringify(data)); } catch (_) {}
            }

            function applyToPage(data) {
                document.getElementById('profile-name').textContent = data.name || defaultData.name;
                document.getElementById('names-tagline').textContent= data.names || defaultData.names;
                document.getElementById('profile-tagline').textContent = data.tagline || defaultData.tagline;
                document.getElementById('profile-intro').textContent = data.intro || defaultData.intro;

                document.querySelectorAll('[data-section]').forEach(el => {
                    const key = el.getAttribute('data-section');
                    el.style.display = data.sections && data.sections[key] === false ? 'none' : '';
                });

                const eduList = document.getElementById('edu-list');
                const lines = (data.edu || defaultData.edu).split('\n').filter(Boolean);
                eduList.innerHTML = lines.map(line => {
                    const parts = line.split('|').map(s => s.trim());
                    const school = parts[0] || '';
                    const meta = parts[1] || '';
                    return '<li class="edu-item"><div class="edu-school">' + escapeHtml(school) + '</div><div class="edu-meta">' + escapeHtml(meta) + '</div></li>';
                }).join('');

                const phone = (data.phone || '').trim();
                const email = (data.email || '').trim();
                const address = (data.address || '').trim();
                const mapsUrl = 'https://www.google.com/maps/search/?api=1&query=' + encodeURIComponent(address);
                const fb = (data.facebook || '').trim();
                const tk = (data.tiktok || '').trim();

                const btnPhone = document.getElementById('btn-phone');
                const btnEmail = document.getElementById('btn-email');
                const btnLocation = document.getElementById('btn-location');
                const btnFacebook = document.getElementById('btn-facebook');
                const btnTiktok = document.getElementById('btn-tiktok');
                if (btnPhone) { btnPhone.href = 'tel:' + phone; }
                if (btnEmail) { btnEmail.href = 'mailto:' + email; }
                if (btnLocation) { btnLocation.href = mapsUrl; }
                if (btnFacebook) { btnFacebook.href = fb || '#'; }
                if (btnTiktok) { btnTiktok.href = tk || '#'; }
            }

            function escapeHtml(s) {
                const div = document.createElement('div');
                div.textContent = s;
                return div.innerHTML;
            }

            function fillForm(data) {
                document.getElementById('opt-intro').checked = data.sections?.intro !== false;
                document.getElementById('opt-edu').checked = data.sections?.edu !== false;
                document.getElementById('opt-contact').checked = data.sections?.contact !== false;
                document.getElementById('input-name').value = data.name || '';
                document.getElementById('input-tagline').value = data.tagline || '';
                document.getElementById('input-intro').value = data.intro || '';
                document.getElementById('input-edu').value = data.edu || '';
                document.getElementById('input-phone').value = data.phone || '';
                document.getElementById('input-email').value = data.email || '';
                document.getElementById('input-address').value = data.address || '';
                document.getElementById('input-facebook').value = data.facebook || '';
                document.getElementById('input-tiktok').value = data.tiktok || '';
            }

            function getFormData() {
                return {
                    sections: {
                        intro: document.getElementById('opt-intro').checked,
                        edu: document.getElementById('opt-edu').checked,
                        contact: document.getElementById('opt-contact').checked
                    },
                    name: document.getElementById('input-name').value.trim() || defaultData.name,
                    tagline: document.getElementById('input-tagline').value.trim() || defaultData.tagline,
                    intro: document.getElementById('input-intro').value.trim() || defaultData.intro,
                    edu: document.getElementById('input-edu').value.trim() || defaultData.edu,
                    phone: document.getElementById('input-phone').value.trim() || defaultData.phone,
                    email: document.getElementById('input-email').value.trim() || defaultData.email,
                    address: document.getElementById('input-address').value.trim() || defaultData.address,
                    facebook: document.getElementById('input-facebook').value.trim() || defaultData.facebook,
                    tiktok: document.getElementById('input-tiktok').value.trim() || defaultData.tiktok
                };
            }

            function getOwnerKey() {
                try { return localStorage.getItem(OWNER_KEY_STORAGE) || ''; } catch (_) { return ''; }
            }
            function setOwnerKey(key) {
                try { localStorage.setItem(OWNER_KEY_STORAGE, (key || '').trim()); } catch (_) {}
            }

            function encodeShareData(data) {
                try {
                    const json = JSON.stringify(data);
                    return btoa(unescape(encodeURIComponent(json))).replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, '');
                } catch (_) { return ''; }
            }
            function decodeShareData(encoded) {
                try {
                    let s = encoded.replace(/-/g, '+').replace(/_/g, '/');
                    while (s.length % 4) s += '=';
                    return JSON.parse(decodeURIComponent(escape(atob(s))));
                } catch (_) { return null; }
            }

            function getDataFromUrl() {
                const params = new URLSearchParams(location.search);
                const d = params.get('d');
                if (d) return decodeShareData(d);
                return null;
            }

            function isOwnerMode() {
                const params = new URLSearchParams(location.search);
                const editParam = params.get('edit');
                if (editParam === null) return false;
                const savedKey = getOwnerKey();
                if (!savedKey) return true;
                return editParam === savedKey;
            }

            let data;
            const urlData = getDataFromUrl();
            if (urlData) {
                data = { ...defaultData, ...urlData };
                applyToPage(data);
                document.getElementById('edit-fab').style.display = 'none';
            } else {
                data = loadData();
                applyToPage(data);
                if (isOwnerMode()) {
                    document.getElementById('edit-fab').style.display = '';
                } else {
                    document.getElementById('edit-fab').style.display = 'none';
                }
            }

            const overlay = document.getElementById('edit-overlay');
            const fab = document.getElementById('edit-fab');
            const closeBtn = document.getElementById('edit-close');
            const applyBtn = document.getElementById('edit-apply');
            const resetBtn = document.getElementById('edit-reset');
            const saveKeyBtn = document.getElementById('save-owner-key');
            const copyLinkBtn = document.getElementById('edit-copy-link');

            if (saveKeyBtn) {
                saveKeyBtn.addEventListener('click', function() {
                    const key = document.getElementById('input-owner-key').value.trim();
                    setOwnerKey(key);
                    alert(key ? 'ƒê√£ l∆∞u m·∫≠t kh·∫©u. Link ch·ªânh s·ª≠a: ' + location.pathname + '?edit=' + encodeURIComponent(key) : 'ƒê√£ x√≥a m·∫≠t kh·∫©u.');
                });
            }

            if (copyLinkBtn) {
                copyLinkBtn.addEventListener('click', function() {
                    const current = getFormData();
                    const encoded = encodeShareData(current);
                    const base = location.origin + location.pathname;
                    const shareUrl = base + (encoded ? '?d=' + encoded : '');
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        navigator.clipboard.writeText(shareUrl).then(function() { alert('ƒê√£ sao ch√©p link chia s·∫ª. G·ª≠i link n√†y cho ng∆∞·ªùi xem.'); }).catch(function() { prompt('Sao ch√©p link:', shareUrl); });
                    } else {
                        prompt('Sao ch√©p link chia s·∫ª:', shareUrl);
                    }
                });
            }

            fab.addEventListener('click', function() {
                fillForm(data);
                overlay.classList.add('edit-overlay--open');
                overlay.setAttribute('aria-hidden', 'false');
            });

            closeBtn.addEventListener('click', closePanel);
            overlay.addEventListener('click', function(e) {
                if (e.target === overlay) closePanel();
            });

            function closePanel() {
                overlay.classList.remove('edit-overlay--open');
                overlay.setAttribute('aria-hidden', 'true');
            }

            applyBtn.addEventListener('click', function() {
                data = getFormData();
                saveData(data);
                applyToPage(data);
                closePanel();
            });

            resetBtn.addEventListener('click', function() {
                if (confirm('ƒê·∫∑t l·∫°i to√†n b·ªô v·ªÅ m·∫∑c ƒë·ªãnh? D·ªØ li·ªáu ƒë√£ l∆∞u s·∫Ω b·ªã x√≥a.')) {
                    data = { ...defaultData };
                    saveData(data);
                    applyToPage(data);
                    fillForm(data);
                }
            });

            // Reveal sections khi scroll
            const sections = document.querySelectorAll('[data-reveal]');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('revealed');
                });
            }, { threshold: 0.15, rootMargin: '0px 0px -30px 0px' });
            sections.forEach(s => observer.observe(s));
        })();
    </script>
</body>

</html>
